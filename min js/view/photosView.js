var PhotosView=Backbone.View.extend({events:{"click .arrowLeft":"previousModel","click .arrowRight":"nextModel","click #create-mode":"backToCreate","keydown .arrow-nav":"nextModelKey","click #edit":"fastEdit","click #fullEdit":"fullEdit","click #save":"saveEdition"},initialize:function(){this.collection.on("change",this.render,this)},render:function(){var t=this.collection.length-1,i=this.collection.at(t).get("imgSrc"),e=this.collection.at(t).get("title"),o=this.collection.at(t).get("description");this.collection.remove(this.collection.at(t)),this.collection.add(createPhotos.models),this.collection.add({title:e,description:o,imgSrc:i});var l=this.collection.at(0);return this.renderModel(l),$(".arrow-nav").focus(),this},renderModel:function(t){var i=new PhotoView({model:t});this.$el.html(i.render().el)},nextModelKey:function(t){39===t.keyCode?this.nextModel():37===t.keyCode&&this.previousModel()},nextModel:function(){var t=this.collection.length-2;if(window.position<t){window.position++;var i=window.position,e=this.collection.at(i).get("imgSrc"),o=this.collection.at(i).get("title"),l=this.collection.at(i).get("description");this.collection.at(0).set({title:o,imgSrc:e,description:l,show:!0})}console.log(i)},previousModel:function(){var t=this.collection.length-1;if(window.position>0){window.position--;var i=window.position;if(0!==window.position)var e=this.collection.at(i).get("imgSrc"),o=this.collection.at(i).get("title"),l=this.collection.at(i).get("description");else var e=this.collection.at(t).get("imgSrc"),o=this.collection.at(t).get("title"),l=this.collection.at(t).get("description");this.collection.at(0).set({title:o,imgSrc:e,description:l,show:!0})}},clearInput:function(){$("#title").val(""),$("#description").html(""),$("#image").val("")},backToCreate:function(){this.$el.css("display","none"),createPhotoView.$el.css("display","block"),this.clearInput()},fastEdit:function(){this.settingEditable(!0)},fullEdit:function(){var t=this.collection.at(window.position),i=t.get("description"),e=t.get("imgSrc");this.settingEditable(!0),createPhotoView.$el.css("display","block"),this.showCreateMode(!1),$(".preview-nav").css("display","none"),$("#preview-description").css("display","none"),$("#full-save").css("display","inline-block"),console.log(i),$("#description").html(i),$("#image").val(e)},showCreateMode:function(t){var i="";i=t?"inline-block":"none",$("#title").css("display",i),$("#add-model").css("display",i),$("#preview").css("display",i)},settingEditable:function(t){$("#preview-title").attr("contentEditable",t),$("#preview-description").attr("contentEditable",t),$("#save").css("display","inline"),$("#preview-title").focus()},saveEdition:function(){var t=this.collection.at(window.position),i=$("#preview-title").html(),e=$("#preview-description").html();if(t.set({title:i,description:e}),this.collection.at(0).set({title:i,description:e}),0===window.position){var o=this.collection.length-1;this.collection.at(o).set({title:i,description:e})}}});